# Java中的运算符

- 算数运算：日常的加减乘除
- 比较运算：比较大小
- 逻辑运算：针对布尔值的运算

## 算数运算

算术运算有：**+ - * / % ++ --**

- **取模运算适用于整数和字符类型**
- 其他算术符适用于所有数值类型和字符类型

### 加，减，乘，除

1. 两个正数相乘的结果可能超出

```java
int a = 2147483647 * 2;
```

结果为什么是-2 ??

```java
byte a = 1;
byte b = 127;
byte c = (byte)(a + b);
System.out.print(c); // c is -128
```

2. 两个小数相减结果有小数

```java
double a = 2.0;
double b = 1.1;
System.out.print(a - b);
```

3. 整数相除不是四舍五入

```java
double d = 10 / 4;
```

结果是2而不是2.5

4. 小数计算结果不准确

```java
double d = 01 * 01;
System.out.print(d);
```

结果是0.01000000001；

### 取模

取模运算适用于**整数和字符类型**

```java
int a = 5 % 3;
```

a = 2

### 自增(++)/自减(--)

自增/自减是对自己做加1或者减1操作，都有两种形式。

1. 放在变量前
2. 放在变量后

说明：**如果只是对自己操作，这两种形式没什么差别**，区别在于还有其他操作的时候。

- 放在变量后(a++)是先用原来的值进行其他操作，然后再对自己做修改
- 放在变量后(++a)是先对自己做修改，再用修改后的值进行其他操作

| 快捷运算 | 等同运算 |
| :---- | :----- |
| b=a++-1 | b=a-1, a=a+1 |
| c=++a-1 | a=a+1, c=a-1 |
| arrA[i++]=arrB[++j] | j=j+1, arrA[i]=arrB[j], i=i+1 |

## 比较运算

比较运算就是计算两个值之间的关系，结果是一个布尔类型。**比较运算适用于所有数值类型和字符类型。**

比较操作符号：

- 大于(>)
- 大于等于(>=)
- 小于(<)
- 小于等于(<=)
- 等于(==),
- 不等于(!=)

**对于数组，==判断的是两个变量指向的是不是同一个数组，而不是两个数组的元素内容是都一样**

## 逻辑运算

逻辑运算只可应用于boolean类型的数据，比较运算的结果是布尔值。

- 与（&）
- 或（|）
- 非（!）
- 异或（^）
- 短路与（&&）
- 短路或（||）

### |与||的区别

```java
boolean a = true;
int b = 0
boolean flag = a | b++ > 0
```

```java
boolean a = true;
int b = 0
boolean flag = a || b++ > 0
```

||会短路，即看到||前半部分就可以判定结果的情况下，忽略||后面的运算。

### 三目运算符

```java
x < y ? x : y
```

## 位运算符

- &
- |
- ^
- ~
- **<<**
- **>>**
- **>>>**

## 数学函数与常量

1. 计算一个数值的平方根

```java
double x = 4;
double y = Math.sqrt(x);
System.out.println(y); // prints 2.0
```

2. 一些三角函数

```java
Math.sin
Math.cos
Math.tan
```

3. 指示函数

```java
Math.log
```

## 结合赋值的运算符

在Java中可以使用二元运算符，这是一种简写形式。

```java
x += 4;
//等价于
x = x + 4;
```

```java
int a = 2;
int b = 4;
a |= b;
//等价于
a = a | b;
```

如果运算符得到一个值，其类型与左侧操作数的类型不同，会发生强制类型转换。

```java
int x = 10;
x += 3.5;
//等价于
(int)(x + 3.5)
```

## 括号与运算符级别

- 如果不使用括号，就按照给出的运算符优先级次序进行计算。
- 同一个级别的运算符按照从左到右的顺序进行计算（除了从右到左的运算符） 

**优先级从上到下**

| 运算符 | 结合性 |
| :---- | :----- |
| == != | 从左向右 |
| & | 从左向右 |
| ^ | 从左向右 |
| && | 从左向右 |
| ?: | **从右向左** |
| = += -= *= /= %= &= ^= <<= >>= >>>= | **从右向左** |

```java
a && b || c
// 等价于
(a && b) || c
```

```java
a += b +=c
// 等价于
a += (b += c)
```