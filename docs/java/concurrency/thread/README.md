synchronized
volatile
synchronized vs volatile


如果创建了固定大小的线程池，比如20个线程，为什么并发执行了10个？难道和机器的性能有关？
Java程序中创建的线程数量和CPU的关系？

如何设置线程的数量，根据机器的性能？

创建了50个线程，他们的执行顺序是如何决定的，不是一起都跑完吗？也是有先后顺序的，谁决定的？

比如一个接口，假设同时访问量很大，线程是如何处理的？我没有分配线程池

# 多线程与CPU之间的关系

CPU性能

::: tip 内核数
内核数是一个硬件术语，它表示单个计算组件（裸芯片或芯片）中的独立中央处理器的数量。
:::

::: tip 线程数
线程或执行线程是一个软件术语，指代那些可由单核 CPU 传递或处理的基本有序指令序列。
:::

::: tip 缓存
CPU高速缓存是处理器上的一个快速记忆区域。
:::


双核四线程：

双核是处理器有两个核心，利用`超线程`技术，一个核心就有两个线程。

::: warning
一个核心两个线程，那么这两个线程是同时处理任务的吗？
:::

核相当于`公路`，双核是两条3米宽的路，四核是4条3米宽的路。

双核四线程是把两条宽的路又化了两根线，分成四条1.5米的路
双核四线程是在原有核心基础上虚拟出两个核心，可以让一个核心同时处理两个不一样的任务，一个核心同时做两件事，效率会打折

## 多线程与单核CPU
顺序执行？？



四核四线程是就是四条4米宽的路。真正可以同时处理4个任务

## 最佳线程数

考虑因素
I/O
CPU

## 查询CPU内核的利用率


## 查看Linux配置信息

```sh
cat /proc/cpuinfo | grep "core id" | sort | uniq | wc -l
```

```sh
cat /proc/cpuinfo | grep "processor" | sort | uniq | wc -l
```
