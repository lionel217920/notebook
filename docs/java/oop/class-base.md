# 类的基础

## 类的基本概念

**定义了类本身，不会做什么事，不会分配内存。**

- 类变量 (静态成员变量)

**类型本身具有的属性**

- 类方法 (静态成员方法)

**类型本身可以进行的操作**

类方法只能访问类变量，不能访问实例变量，可以调用其他的类方法，不能调用实例方法。

- 实例变量 (成员变量)

**类型实例具有的属性，也称之为成员变量**

- 实例方法 (成员方法)

**类型实例可以进行的操作**

实例方法既能访问实例变量，也能访问类变量，既可以调用实例方法，也可以调用类方法。

## 声明一个类实例

与基本数据类型相比，`int a`这个语句，`int`就是类型，`a`就是实例。

**定义了类本身，不会做什么事，不会分配内存。实例也称作对象**

另外注意，实例变量不需要一开始就有值。

```java
Point p;
p = new Point();
```

1. `Point p`声明了一个变量，p是Point类型的
2. 声明变量本身**只会分配存放位置的内存空间(栈内存)**，这块空间还没有指向任何实际内容，只是存储实际内容的位置。
3. `p = new Point();`创建了一个实例或对象，然后赋值给了变量p。**分配内存(堆内存)** 之后给实例变量设置默认值

总结：

- 引用类型变量和数组一样，都有两块内存：一块存放实际内容，一块存放实际内容的位置。
- 在创建对象的时候，所有的实例变量都会分配一个默认值。
  - 数值类型变量的默认值是0
  - boolean是false
  - char是\u0000
  - 引用类型是null

## 初始化代码块

初始化代码块的一般应用就是给变量赋值

- 初始化代码块

**在创建一个对象的时候，会先调用初始化代码块，然后才执行构造方法！！！**

- 静态初始化代码块

**在类加载的时候执行，在任何对象创建之前，且只执行一次！！！**

## 构造方法

构造方法可以有多个，不同于一般方法，构造方法名称是固定的，与类名相同，并且没有返回值。

**构造方法中如果有this调用，this调用必须放在第一行，如果调用别的构造方法，先调别的，然后再做调整。**

```java
Point p = new Point();
```

1. 分配内存空间
2. 给实例变量设置默认值
3. 调用构造方法

**默认构造方法**

每个类都至少有一个构造方法，在**通过new创建对象的过程**中会被调用。构造方法没有什么其他操作可以省略，Java编译器会自动生成一个默认的构造方法。

**记住，一旦定义了构造方法，Java就不会再自动生成默认的构造方法了！！！**

**私有构造方法**

1. 不能创建类的实例，如`Math`类，只能被静态访问
2. 能创建类的实例，但只能被类的静态方法调用。即类的对象有但是只能有一个
3. 只是被其他多个构造方法调用

## this关键字

**在实例方法中有一个隐含的参数，这个参数就是当前操作的实例自己，this表示当前实例**

- this引用一个对象，是实实在在存在的
- 可以作为函数参数，**可以作为返回值**

**在构造方法中调用其他构造方法，this必须放在第一行！！！**

## 类和对象的声明周期

1. 类加载

当第一次通过new创建一个类的对象时，或者通过类名访问类变量和类方法时，Java会将类加载进内存，为这个类分配一块空间，这个空间包括类的定义，变量和方法信息。（**类加载进内存，会放到方法区** ）

同时**还有类的静态变量**，接下来会对静态变量赋初始值。

类加载进内存后，一般不会释放，直到程序结束。**一般情况下，类只会加载一次。所以静态变量在内存中只有一份。**

2. 创建对象

通过new创建一个对象的时候，对象产生，在内存中会存储这个对象的实例变量的值。**每做new操作一次，就会产生一个对象，就会有一份独立的实例变量。**

注意，每个实例对象除了保存实例变量的值外，**还保存着对应类型的地址，也即是类的地址**。这样通过对象就是能知道类。

3. 内存

对象和数组一样，有两块内存。**保存地址的部分分配在栈中，而保存实际内容的部分分配在堆中。**

- 栈中的内容是自动管理的
- 堆中的内存是被垃圾回收机制管理的

## 类的可见性范围

Java中使用包的概念来解决命名冲突。带完整包名的类名称为**完全限定名**

同一个包下面的类之间引用式不需要包名的，可以直接引用。

**如果什么可见性修饰符都不写，它的可见性范围就是同一个包内(不包括子包)，同一个包内的其他类可以访问。**

可见性范围大小：

**private < 默认包 < protected < public**

